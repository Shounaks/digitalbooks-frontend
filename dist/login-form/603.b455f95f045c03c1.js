"use strict";(self.webpackChunklogin_form=self.webpackChunklogin_form||[]).push([[603],{1603:(S,Z,r)=>{r.r(Z),r.d(Z,{UserModule:()=>b});var n=r(6895),u=r(9680),o=r(8274),d=r(8104),_=r(8225);function f(i,e){1&i&&(o.TgZ(0,"div",13),o._uU(1,"No Data Found"),o.qZA())}function U(i,e){if(1&i){const t=o.EpF();o.TgZ(0,"tr")(1,"th"),o._uU(2),o.qZA(),o.TgZ(3,"td")(4,"b",16),o._uU(5),o.qZA()(),o.TgZ(6,"td"),o._uU(7),o.qZA(),o.TgZ(8,"td")(9,"b"),o._uU(10),o.ALo(11,"currency"),o.qZA()(),o.TgZ(12,"td")(13,"b"),o._uU(14),o.qZA()(),o.TgZ(15,"td")(16,"button",17),o.NdJ("click",function(){const g=o.CHM(t).$implicit,k=o.oxw(2);return o.KtG(k.unsubscribe(g.book.bookId))}),o.TgZ(17,"b"),o._uU(18,"UnSubscribe"),o.qZA()()()()}if(2&i){const t=e.$implicit,s=o.oxw(2);o.xp6(2),o.Oqu(t.book.bookId),o.xp6(2),o.Q6J("routerLink",t.subscription.id),o.xp6(1),o.Oqu(t.book.title),o.xp6(2),o.Oqu(t.book.category),o.xp6(3),o.hij("",o.xi3(11,7,t.book.price,"INR")," "),o.xp6(4),o.Oqu(t.subscription.subscriptionDate),o.xp6(2),o.Q6J("disabled",s.isSubscriptionDatePost24Hours(t.subscription.subscriptionDate))}}function m(i,e){if(1&i&&(o.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th"),o._uU(4,"bookId"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Title"),o.qZA(),o.TgZ(7,"th"),o._uU(8,"Category"),o.qZA(),o.TgZ(9,"th"),o._uU(10,"You Paid"),o.qZA(),o.TgZ(11,"th"),o._uU(12,"Subscribed On"),o.qZA(),o.TgZ(13,"th"),o._uU(14,"Block Status"),o.qZA()()(),o.TgZ(15,"tbody"),o.YNc(16,U,19,10,"tr",15),o.qZA()()),2&i){const t=o.oxw();o.xp6(16),o.Q6J("ngForOf",t.allSubscribedBooks)}}function T(i,e){1&i&&(o.TgZ(0,"div",13),o._uU(1,"No Data Found"),o.qZA())}function A(i,e){if(1&i){const t=o.EpF();o.TgZ(0,"tr")(1,"th"),o._uU(2),o.qZA(),o.TgZ(3,"td",18),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.ALo(11,"currency"),o.qZA(),o.TgZ(12,"td")(13,"button",19),o.NdJ("click",function(){const g=o.CHM(t).$implicit,k=o.oxw(2);return o.KtG(k.subscribe(g.bookId))}),o.TgZ(14,"b"),o._uU(15,"Subscribe"),o.qZA()()()()}if(2&i){const t=e.$implicit;o.xp6(2),o.Oqu(t.bookId),o.xp6(1),o.Q6J("routerLink","/book/"+t.bookId),o.xp6(1),o.Oqu(t.title),o.xp6(2),o.Oqu(t.category),o.xp6(2),o.Oqu(t.publishedDate),o.xp6(2),o.hij("",o.xi3(11,6,t.price,"INR")," ")}}function q(i,e){if(1&i&&(o.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th"),o._uU(4,"bookId"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Title"),o.qZA(),o.TgZ(7,"th"),o._uU(8,"Category"),o.qZA(),o.TgZ(9,"td"),o._uU(10,"Publish Date"),o.qZA(),o.TgZ(11,"th"),o._uU(12,"Price"),o.qZA(),o.TgZ(13,"th"),o._uU(14,"Block Status"),o.qZA()()(),o.TgZ(15,"tbody"),o.YNc(16,A,16,9,"tr",15),o.qZA()()),2&i){const t=o.oxw();o.xp6(16),o.Q6J("ngForOf",t.allUnblockedBooks)}}class c{constructor(e,t){this.bookService=e,this.logger=t}ngOnInit(){this.populateAllData()}subscribe(e){this.bookService.subscribeToBook(e).subscribe(t=>this.populateAllData(),t=>this.logger.warn(t))}unsubscribe(e){this.bookService.unsubscribeToBook(e).subscribe(t=>this.populateAllData(),t=>this.logger.warn(t))}isSubscriptionDatePost24Hours(e){return new Date(e).valueOf()+864e5<Date.now()}populateAllData(){this.bookService.retrieveAllUnblockedBooks().subscribe(e=>this.allUnblockedBooks=e,e=>this.logger.warn(e)),this.bookService.retrieveAllSubscribedBooks().subscribe(e=>{this.allSubscribedBooks=e,this.allUnblockedBooks=this.allSubscribedBooks&&0!=this.allSubscribedBooks.length?this.populateUnsubscribedBooks(this.allUnblockedBooks,this.allSubscribedBooks):[]},e=>this.logger.warn(e))}populateUnsubscribedBooks(e,t){return e.filter(s=>!t.flatMap(p=>p.book.bookId).includes(s.bookId))}}c.\u0275fac=function(e){return new(e||c)(o.Y36(d.Z),o.Y36(_.Kf))},c.\u0275cmp=o.Xpm({type:c,selectors:[["app-subscribe"]],decls:33,vars:4,consts:[[1,"hero","min-h-screen","bg-[url('/assets/book_wall.jpg')]"],[1,"hero-content","text-center","max-w-full","grid","grid-flow-col","auto-cols-fr"],[1,"max-w","shadow-lg","border-base-100","p-4","border-2","rounded-box","h-screen","bg-base-200","opacity-95"],[1,"text-5xl","font-bold"],[1,"border-base-100","border-2"],[1,"py-6"],[1,"text-info"],[1,"text-warning"],[1,"overflow-x-auto"],["class","text-2xl font-bold text-slate-500",4,"ngIf"],["class","table w-full",4,"ngIf"],[1,"text-secondary"],[1,"text-primary"],[1,"text-2xl","font-bold","text-slate-500"],[1,"table","w-full"],[4,"ngFor","ngForOf"],[1,"text-info","underline","underline-offset-2","cursor-pointer",3,"routerLink"],[1,"btn","btn-outline","btn-warning",3,"disabled","click"],[1,"text-secondary","link","underline-offset-2","cursor-pointer",3,"routerLink"],[1,"btn","btn-outline","btn-primary",3,"click"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o._uU(4,"Your Subscriptions"),o.qZA(),o._UZ(5,"hr",4),o.TgZ(6,"p",5),o._uU(7,"This is the list of books that you have bought on our platform. Click on the "),o.TgZ(8,"span",6),o._uU(9,"Book Name"),o.qZA(),o._uU(10," to see reciept and read the contents of the book. "),o.TgZ(11,"span",7),o._uU(12,"Unsubscribe"),o.qZA(),o._uU(13," will remove your subscription to that book provided its within 24-hrs"),o.qZA(),o._UZ(14,"br"),o.TgZ(15,"div",8),o.YNc(16,f,2,0,"div",9),o.YNc(17,m,17,1,"table",10),o.qZA()(),o.TgZ(18,"div",2)(19,"h1",3),o._uU(20,"All Books"),o.qZA(),o._UZ(21,"hr",4),o.TgZ(22,"p",5),o._uU(23,"List of books present on our platform. you can click on the "),o.TgZ(24,"span",11),o._uU(25,"Book Name"),o.qZA(),o._uU(26," to get more information on that book, or buy a subscription by clicking on "),o.TgZ(27,"span",12),o._uU(28,"Subscribe"),o.qZA()(),o._UZ(29,"br"),o.TgZ(30,"div",8),o.YNc(31,T,2,0,"div",9),o.YNc(32,q,17,1,"table",10),o.qZA()()()()),2&e&&(o.xp6(16),o.Q6J("ngIf",!(t.allSubscribedBooks&&0!=t.allSubscribedBooks.length)),o.xp6(1),o.Q6J("ngIf",t.allSubscribedBooks&&0!=t.allSubscribedBooks.length),o.xp6(14),o.Q6J("ngIf",!(t.allUnblockedBooks&&0!=t.allUnblockedBooks.length)),o.xp6(1),o.Q6J("ngIf",t.allUnblockedBooks&&0!=t.allUnblockedBooks.length))},dependencies:[n.sg,n.O5,u.rH,n.H9]});var h=r(7539);class l{constructor(e,t,s){this.router=e,this.bookService=t,this.userService=s,this.bookId=-1,this.subscriptionId=-1,this.title="",this.content="",this.populateData()}populateData(){this.router.params.subscribe(t=>{this.subscriptionId=t.subscriptionId,this.bookId=t.bookId}),this.bookService.retrieveSubscribedBookData(this.userService.user.emailId,this.subscriptionId).subscribe(t=>{this.content=t.book.content,this.title=t.book.title})}}l.\u0275fac=function(e){return new(e||l)(o.Y36(u.gz),o.Y36(d.Z),o.Y36(h.P))},l.\u0275cmp=o.Xpm({type:l,selectors:[["app-read"]],decls:11,vars:2,consts:[[1,"hero","min-h-screen","bg-[url('/assets/book_wall.jpg')]"],[1,"hero-content","flex-col","lg:flex-row","border","shadow-lg","rounded-lg","border-base-200","bg-base-200","opacity-95"],[1,"w-full"],["onclick","window.history.go(-1)",1,"btn","btn-outline","mb-10"],[1,"text-5xl","font-bold","pb-2","w-full","h-full"],[1,"py-4","w-full"],[1,"pl-4","bg-base-100"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),o._uU(4,"\u2b05\ufe0f Go Back"),o.qZA(),o._UZ(5,"br"),o.TgZ(6,"h1",4),o._uU(7),o.qZA(),o.TgZ(8,"div",5)(9,"p",6),o._uU(10),o.qZA()()()()()),2&e&&(o.xp6(7),o.Oqu(t.title),o.xp6(3),o.Oqu(t.content))}});class a{constructor(e,t,s){this.router=e,this.bookService=t,this.userService=s,this.bookSubscription={book:this.emptyBook(),subscription:this.emptySubscription()}}ngOnInit(){this.populateData()}populateData(){this.router.params.subscribe(e=>{this.subscriptionId=e.subscriptionId}),this.bookService.retrieveSubscribedBookData(this.userService.user.emailId,this.subscriptionId).subscribe(e=>this.bookSubscription=e,e=>console.log(e))}emptyBook(){return{bookId:0,title:"",category:"",price:0,authorId:0,publisher:"",publishedDate:new Date,content:"",blocked:!1}}emptySubscription(){return{id:0,bookId:0,subscriptionDate:new Date}}}a.\u0275fac=function(e){return new(e||a)(o.Y36(u.gz),o.Y36(d.Z),o.Y36(h.P))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-bookinfo"]],decls:67,vars:24,consts:[[1,"hero","min-h-screen","bg-[url('/assets/book_wall.jpg')]"],[1,"hero-content","flex-col","lg:flex-row","border","shadow-lg","rounded-lg","border-base-200","bg-base-200","opacity-95"],[1,"h-full"],["onclick","window.history.go(-1)",1,"btn","btn-outline","mb-10"],["src","https://placeimg.com/260/400/arch",1,"max-w-xs","max-h-full","rounded-lg","shadow-2xl"],[1,"text-5xl","font-bold","pb-2"],[1,"py-4","w-full"],[1,"float-left"],[1,"float-right","badge","badge-outline"],[1,"float-right"],[1,"mb-40"],[1,"btn","btn-outline","btn-info","float-right","h-full",3,"disabled","routerLink"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),o._uU(4,"\u2b05\ufe0f Go Back"),o.qZA(),o._UZ(5,"img",4),o.qZA(),o.TgZ(6,"div",2)(7,"h1",5),o._uU(8),o.qZA(),o.TgZ(9,"div",6)(10,"p",7),o._uU(11,"Category: "),o.qZA(),o.TgZ(12,"p",8)(13,"b"),o._uU(14),o.qZA()()(),o.TgZ(15,"div",6)(16,"p",7),o._uU(17,"Subscribed On: "),o.qZA(),o.TgZ(18,"p",9)(19,"b"),o._uU(20),o.ALo(21,"date"),o.qZA()()(),o.TgZ(22,"div",6)(23,"p",7),o._uU(24,"Book Unique Identification: "),o.qZA(),o.TgZ(25,"p",9)(26,"b"),o._uU(27),o.qZA()()(),o.TgZ(28,"div",6)(29,"p",7),o._uU(30,"Publisher: "),o.qZA(),o.TgZ(31,"p",9)(32,"b"),o._uU(33),o.qZA()()(),o.TgZ(34,"div",6)(35,"p",7),o._uU(36,"Published On: "),o.qZA(),o.TgZ(37,"p",9)(38,"b"),o._uU(39),o.ALo(40,"date"),o.qZA()()(),o.TgZ(41,"div",6)(42,"p",7),o._uU(43,"Price Paid: "),o.qZA(),o.TgZ(44,"p",9)(45,"b"),o._uU(46),o.ALo(47,"currency"),o.qZA()()(),o.TgZ(48,"div",6)(49,"p",7),o._uU(50,"GST Added(8% on Printed Books): "),o.qZA(),o.TgZ(51,"p",9)(52,"b"),o._uU(53),o.ALo(54,"currency"),o.qZA()()(),o._UZ(55,"br")(56,"hr"),o.TgZ(57,"div",6)(58,"p",7),o._uU(59,"Total Cost: "),o.qZA(),o.TgZ(60,"p",9)(61,"b"),o._uU(62),o.ALo(63,"currency"),o.qZA()()(),o._UZ(64,"div",10),o.TgZ(65,"button",11),o._uU(66,"Read"),o.qZA()()()()),2&e&&(o.xp6(8),o.Oqu(t.bookSubscription.book.title),o.xp6(6),o.Oqu(t.bookSubscription.book.category),o.xp6(6),o.Oqu(o.lcZ(21,11,t.bookSubscription.subscription.subscriptionDate)),o.xp6(7),o.Oqu(t.bookSubscription.book.bookId),o.xp6(6),o.Oqu(t.bookSubscription.book.publisher),o.xp6(6),o.Oqu(o.lcZ(40,13,t.bookSubscription.book.publishedDate)),o.xp6(7),o.Oqu(o.xi3(47,15,t.bookSubscription.book.price,"INR")),o.xp6(7),o.Oqu(o.xi3(54,18,.08*t.bookSubscription.book.price,"INR")),o.xp6(9),o.Oqu(o.xi3(63,21,1.08*t.bookSubscription.book.price,"INR")),o.xp6(3),o.Q6J("disabled",t.bookSubscription.book.blocked)("routerLink",t.bookSubscription.book.bookId+"/read"))},dependencies:[u.rH,n.H9,n.uU]});const x=[{path:"subscribe",component:c},{path:"subscribe/:subscriptionId",component:a},{path:"subscribe/:subscriptionId/:bookId/read",component:l}];class b{}b.\u0275fac=function(e){return new(e||b)},b.\u0275mod=o.oAB({type:b}),b.\u0275inj=o.cJS({imports:[u.Bz.forChild(x),n.ez]})}}]);